# Comandos de TypeScript

TypeScript proporciona una variedad de comandos y opciones a través de su compilador (`tsc`) y herramientas relacionadas para facilitar el desarrollo, la compilación y la depuración de proyectos. En esta sección, aprenderás los comandos más importantes de TypeScript, cómo usarlos y cómo optimizar tu flujo de trabajo.

## Introducción al Compilador de TypeScript (`tsc`)

El compilador de TypeScript, `tsc`, transforma archivos TypeScript (`.ts` o `.tsx`) en JavaScript (`.js`) compatible con navegadores o entornos como Node.js. Se instala con TypeScript mediante npm:

```bash
npm install -g typescript
```

Verifica la instalación:

```bash
tsc --version
```

Esto muestra la versión instalada, por ejemplo, `Version 5.x.x`.

## Comandos Básicos de `tsc`

### 1. Compilar un Archivo Específico

Compila un archivo `.ts` en JavaScript:

```bash
tsc src/index.ts
```

Esto genera `src/index.js` (o en la carpeta especificada en `tsconfig.json`).

### 2. Compilar Todos los Archivos del Proyecto

Si tienes un archivo `tsconfig.json`, compila todos los archivos TypeScript del proyecto:

```bash
tsc
```

### 3. Compilar en Modo de Observación (`--watch`)

Recompila automáticamente al detectar cambios:

```bash
tsc --watch
```

Útil durante el desarrollo para evitar ejecutar `tsc` manualmente.

### 4. Especificar un Archivo de Configuración

Usa un archivo `tsconfig.json` personalizado:

```bash
tsc --project ./ruta/a/tsconfig.json
```

Abreviado como:

```bash
tsc -p ./ruta/a/tsconfig.json
```

### 5. Generar un Archivo `tsconfig.json`

Crea un archivo de configuración predeterminado:

```bash
tsc --init
```

Esto genera `tsconfig.json` con opciones comentadas para personalizar.

## Opciones Comunes de `tsc`

Las opciones se pueden pasar como argumentos en la línea de comandos o configurar en `tsconfig.json`. Aquí están las más usadas:

### 1. `--target`

Especifica la versión de JavaScript de salida (por ejemplo, `ES5`, `ES2020`):

```bash
tsc --target ES2020 src/index.ts
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "target": "ES2020"
  }
}
```

### 2. `--module`

Define el sistema de módulos (`commonjs`, `esnext`, etc.):

```bash
tsc --module commonjs src/index.ts
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "module": "commonjs"
  }
}
```

### 3. `--outDir`

Especifica la carpeta de salida para los archivos compilados:

```bash
tsc --outDir dist
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "outDir": "./dist"
  }
}
```

### 4. `--rootDir`

Define la carpeta raíz de los archivos fuente:

```bash
tsc --rootDir src
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "rootDir": "./src"
  }
}
```

### 5. `--strict`

Habilita todas las verificaciones estrictas de tipos:

```bash
tsc --strict
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "strict": true
  }
}
```

### 6. `--noEmit`

Analiza el código sin generar archivos de salida, útil para verificar errores:

```bash
tsc --noEmit
```

### 7. `--declaration`

Genera archivos de declaración de tipos (`.d.ts`):

```bash
tsc --declaration
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "declaration": true
  }
}
```

### 8. `--sourceMap`

Genera mapas de origen (`.js.map`) para depuración:

```bash
tsc --sourceMap
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "sourceMap": true
  }
}
```

## Comandos Avanzados

### 1. Compilar con Diagnósticos Detallados

Muestra estadísticas de compilación:

```bash
tsc --diagnostics
```

Ejemplo de salida:

```
Files:         10
Lines:       1000
Nodes:       5000
Identifiers:  200
...
```

### 2. Limpiar la Carpeta de Salida

No hay un comando nativo para limpiar, pero puedes combinar con `rm`:

```bash
rm -rf dist && tsc
```

O usa un script en `package.json`:

```json
{
  "scripts": {
    "build": "rm -rf dist && tsc"
  }
}
```

Ejecuta con:

```bash
npm run build
```

### 3. Compilar Solo Archivos Modificados

Habilita compilación incremental:

```bash
tsc --incremental
```

En `tsconfig.json`:

```json
{
  "compilerOptions": {
    "incremental": true
  }
}
```

Esto genera un archivo `.tsbuildinfo` para rastrear cambios.

### 4. Verificar Tipos sin Compilar

Usa `tsc` con `--noEmit` para verificar tipos sin generar JavaScript:

```bash
tsc --noEmit src/index.ts
```

## Herramientas Relacionadas

### 1. `ts-node`

Ejecuta archivos TypeScript directamente sin compilarlos:

```bash
npm install --save-dev ts-node
```

Ejemplo:

```bash
ts-node src/index.ts
```

Con modo de observación:

```bash
ts-node --watch src/index.ts
```

### 2. `nodemon` con TypeScript

Reinicia automáticamente al guardar cambios:

```bash
npm install --save-dev nodemon
```

Configura un script en `package.json`:

```json
{
  "scripts": {
    "dev": "nodemon src/index.ts"
  }
}
```

Ejecuta con:

```bash
npm run dev
```

Asegúrate de tener `ts-node` instalado para que `nodemon` procese archivos `.ts`.

### 3. `tsc` con ESLint

Integra ESLint para linting de TypeScript:

```bash
npm install --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
```

Crea `.eslintrc.json`:

```json
{
  "parser": "@typescript-eslint/parser",
  "plugins": ["@typescript-eslint"],
  "extends": ["plugin:@typescript-eslint/recommended"],
  "rules": {}
}
```

Lintea tu código:

```bash
npx eslint src/**/*.ts
```

### 4. `tsc` en Proyectos con Jest

Configura Jest para pruebas en TypeScript:

```bash
npm install --save-dev jest ts-jest @types/jest
```

Crea `jest.config.js`:

```javascript
module.exports = {
  preset: "ts-jest",
  testEnvironment: "node",
};
```

Ejecuta pruebas:

```bash
npx jest
```

## Ejemplo Práctico

1. **Crea un proyecto**:

   ```bash
   mkdir proyecto-typescript
   cd proyecto-typescript
   npm init -y
   npm install --save-dev typescript ts-node nodemon
   tsc --init
   ```

2. **Configura `tsconfig.json`**:

   ```json
   {
     "compilerOptions": {
       "target": "ES2020",
       "module": "commonjs",
       "outDir": "./dist",
       "rootDir": "./src",
       "strict": true,
       "sourceMap": true,
       "declaration": true,
       "incremental": true
     }
   }
   ```

3. **Crea `src/index.ts`**:

   ```typescript
   const saludar = (nombre: string): string => `Hola, ${nombre}!`;
   console.log(saludar("TypeScript"));
   ```

4. **Configura scripts en `package.json`**:

   ```json
   {
     "scripts": {
       "build": "tsc",
       "watch": "tsc --watch",
       "start": "node dist/index.js",
       "dev": "nodemon src/index.ts",
       "typecheck": "tsc --noEmit"
     }
   }
   ```

5. **Prueba los comandos**:

   - Compila: `npm run build`
   - Ejecuta: `npm run start`
   - Desarrollo: `npm run dev`
   - Verifica tipos: `npm run typecheck`

## Buenas Prácticas

- **Usa `tsconfig.json`**: Centraliza la configuración en lugar de pasar opciones en la CLI.
- **Habilita `--strict`**: Mejora la seguridad de tipos.
- **Usa `--watch` en desarrollo**: Optimiza el flujo de trabajo.
- **Combina con herramientas**: Usa `ts-node`, `nodemon` o `Jest` para mayor productividad.
- **Automatiza con scripts**: Define scripts en `package.json` para comandos frecuentes.

