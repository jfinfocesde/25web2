# Optimización y Producción

Tailwind CSS genera archivos CSS grandes si no se optimiza, ya que incluye todas las clases utilitarias. En esta sección, aprenderás cómo optimizar Tailwind para producción y reducir el tamaño del CSS.

## Purga de Estilos No Utilizados

Tailwind usa PurgeCSS (ahora integrado como `content` en `tailwind.config.js`) para eliminar clases no utilizadas.

1. **Configura `content` en `tailwind.config.js`**:

   ```javascript
   /** @type {import('tailwindcss').Config} */
   module.exports = {
     content: ["./src/**/*.{html,js,ts,jsx,tsx}"],
     theme: {
       extend: {},
     },
     plugins: [],
   };
   ```

   Esto asegura que solo las clases usadas en los archivos especificados se incluyan en el CSS final.

2. **Compila para producción**:

   Usa el modo producción para minimizar el CSS:

   ```bash
   NODE_ENV=production npx tailwindcss -i ./src/input.css -o ./dist/output.css --minify
   ```

   El flag `--minify` reduce aún más el tamaño del archivo.

## Usar JIT (Just-In-Time) Mode

El modo JIT genera clases dinámicamente, reduciendo el tamaño del CSS y mejorando el tiempo de compilación. Está habilitado por defecto desde Tailwind 3.0, pero verifica `tailwind.config.js`:

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  mode: "jit",
  content: ["./src/**/*.{html,js,ts,jsx,tsx}"],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

## Comprimir el CSS

Usa herramientas como `cssnano` para comprimir aún más el CSS:

1. Instala `postcss` y `cssnano`:

   ```bash
   npm install -D postcss cssnano
   ```

2. Crea `postcss.config.js`:

   ```javascript
   module.exports = {
     plugins: {
       tailwindcss: {},
       autoprefixer: {},
       cssnano: process.env.NODE_ENV === "production" ? {} : false,
     },
   };
   ```

3. Actualiza el script de compilación en `package.json`:

   ```json
   {
     "scripts": {
       "build": "NODE_ENV=production postcss src/input.css -o dist/output.css",
       "watch": "postcss src/input.css -o dist/output.css --watch"
     }
   }
   ```

4. Compila:

   ```bash
   npm run build
   ```

## Ejemplo Práctico

1. Configura `tailwind.config.js` y `postcss.config.js` como arriba.

2. Crea `src/optimizado.html`:

   ```html
   <!DOCTYPE html>
   <html lang="es">
   <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Optimización</title>
     <link href="/dist/output.css" rel="stylesheet">
   </head>
   <body class="bg-gray-100 p-8">
     <div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-md">
       <h1 class="text-2xl font-bold text-blue-600">Optimizado</h1>
       <p class="mt-4">CSS optimizado para producción.</p>
     </div>
   </body>
   </html>
   ```

3. Compila para producción:

   ```bash
   npm run build
   ```

4. Sirve:

   ```bash
   live-server src
   ```

